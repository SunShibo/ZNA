<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ZNA-ABOUT US</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <meta content="telephone=no" name="format-detection"/>
    <meta name="viewport"
          content="width=device-width,initial-scale=1,maximum-scale=1.0,user-scalable=no,viewport-fit=cover"/>
    <meta content="telephone=no" name="format-detection">
    <meta name="applicable-device" content="mobile">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no">
    <link rel="stylesheet" href="swiper/css/swiper.min.css">
    <link rel="stylesheet" href="./css/styles.css">
</head>
<body>
<div id="app-page">
    <div class="head">
        <div class="head-item logo">
            <a href="home.html"><img src="image/logo.jpg" id="logoImage" alt="" height="100%"></a>
        </div>


        <div class="head-item head_search">
            <div class="search_icon"><img src="image/icon/ic_search.png" alt="" width="100%" height="100%"></div>
            <input id="keyword" type="search" placeholder="SEARCH" autocomplete="off"/>
        </div>

        <div class="head-item head-btn">

            <div class="close-menu" id="closeMenu">
                <img src="image/icon/ic_menuClose.png" alt="" width="100%" height="100%">
            </div>

            <div class="menu head-item-btn" id="clickMenu">
                <img src="image/icon/ic_menuOpen.png" alt="" width="100%" height="100%">
            </div>
            <div class="search head-item-btn" id="clickSearch">
                <img src="image/icon/ic_search.png" alt="" width="100%" height="100%">
            </div>
            <div class="language head-item-btn" id="language"></div>
        </div>
    </div>

    <!--搜索页面-->
    <div class="search_list">
        <div class="list">
            <div><a href="javascript:void(0)" id="toProject"></a></div>
            <div><a href="javascript:void(0)" id="toNews"></a></div>
        </div>
    </div>

    <!--菜单-->
    <nav id="nav">
        <ul class="nav-ul">
            <li><a href="aboutUs.html" id="about" class="nav-href"></a></li>
            <li>
                <a href="#" id="project" class="nav-href"></a>
                <div class="sub">
                    <ul class="sub-nav">
                        <li class="singular"><a href="project.html?id=HOTEL/RESORT"></a></li>
                        <li><a href="project.html?id=OFFICE/MIXED-USE"></a></li>
                        <li class="singular"><a href="project.html?id=CIVIC/EXHIBITION"></a></li>
                        <li><a href="project.html?id=RESIDENTIAL/HEALTHCARE"></a></li>
                        <li class="singular"><a href="project.html?id=EDUCATION/SCIENCE"></a></li>
                        <li><a href="project.html?id=MASTER/PLANNING"></a></li>
                        <li class="singular sub-bottom"><a href="project.html?id=LANDSCAPE/DESIGN"></a></li>
                        <li class="sub-bottom"><a href="project.html?id=INTERIOR/DESIGN"></a></li>
                    </ul>
                </div>
            </li>
            <li><a href="team.html" id="team" class="nav-href"></a></li>
            <li><a href="news.html" id="dynamic" class="nav-href"></a></li>
            <li>
                <a href="#" id="information" class="nav-href"></a>
                <div class="sub">
                    <ul class="sub-nav">
                        <li class="singular sub-bottom"><a href="office.html"></a></li>
                        <li class="sub-bottom"><a href="recruitment.html"></a></li>
                    </ul>
                </div>
            </li>
        </ul>
    </nav>


    <div class="content">
        <!--关于我们banner-->
        <div class="banner banner-item about-us-banner">
            <div class="swiper-container">
                <div class="swiper-wrapper" id="aboutUsBanner"></div>
                <!-- 如果需要分页器 -->
                <div class="swiper-pagination"></div>
            </div>
        </div>

        <div class="about-items">
            <!-- 这个div设置为宽度100%，并且溢出显示隐藏 -->
            <div class="about-item-image about_image_info">
                <!-- 这个div设置为和img图片同样的宽高，并且用absolute定位设置为居中 -->
                <div class="about-item-image-wrapper">
                    <img src="" id="aboutItemImage" alt="" width="100%">
                </div>
            </div>
        </div>

        <div class="about-item-content"></div>

        <div class="about-href">
            <img src="" id="aboutHref" alt="" width="100%" height="100%">
            <div><a id="aboutHistoryHref"></a></div>
        </div>

        <div class="about-items">
            <!-- 这个div设置为宽度100%，并且溢出显示隐藏 -->
            <div class="about-item-image about_iamge_service">
                <!-- 这个div设置为和img图片同样的宽高，并且用absolute定位设置为居中 -->
                <div class="service-img__wrapper"></div>
            </div>
            <div class="about-service">
                <div class="about-title" style="font-size: .3rem;" id="serviceTitle"></div>
                <div style="font-size: .25rem;" id="serviceContext"></div>
            </div>
        </div>

        <div>
            <div class="about-title" style="font-size: .3rem;margin: .3rem;font-family: PingFang-SC-Bold;"
                 id="aboutCoopterative"></div>
            <div>
                <div class="swiper-coopterative">
                    <div class="swiper-wrapper" id="coopterative">
                    </div>
                    <!-- 如果需要分页器 -->
                    <div class="about-pagination"></div>
                </div>
            </div>
        </div>

    </div>

    <div id="icon_wechat">
        <div class="wechat">
            <div class="wechat_image">
                <img src="./image/wechat.jpg" alt="">
            </div>
            <div class="wechat_text">扫描二维码，关注微信公众号</div>
        </div>
    </div>

    <div id="foot">
        <div class="foot-center">
            <div class="foot-office-info">
                <div class="contact">TEL: <span id="mobile"></span></div>
                <div class="contact">FAX: <span id="faxNO"></span></div>
            </div>
            <div class="contact">EMAIL: <span id="email"></span></div>
            <div class="icon-list">
                <img id="toMicroblog" src="./image/icon/ic_microblog.png" alt="" width="100%" height="100%">
                <img id="toIn" src="./image/icon/ic_in.png" alt="" width="100%" height="100%">
                <img id="toWechat" src="./image/icon/ic_wechat.png" alt="" width="100%" height="100%">
            </div>
            <div class="foot-icp contact">沪ICP备案号17050193</div>
        </div>
    </div>
</div>
<script src="js/jquery-1.11.1.min.js"></script>
<script src="swiper/js/swiper.min.js"></script>
<script src="js/rem.js"></script>
<script src="js/index.js"></script>
<script>
    (function (window, $) {

        var data = [], mySwiper = {};

        //按语言加载页面数据
        window.switch_language = function (lang) {

            if (data.length) {
                setting(lang)
            } else {
                $.when(
                    $.ajax({
                        url: '/aboutUs/getAboutUs',
                        type: 'POST',
                        dataType: 'json'
                    }),
                    $.post('/cooperativeClient/getCooperativeClientS')
                ).then(function (r, it) {

                    init(r[0], lang);

                    institutions(it[0].data);

                });
            }

        };

        //初始化页面部分数据
        function init(r, lang) {
            //将需要中英文切换的数据保存到数组内
            data.push(r.data.aboutBannerBOS);
            data.push(r.data.aboutUs);
            data.push(r.data.serviceusBO);

            //不需要中英文切换的图片类和文本类数据直接加载
            //关于我们信息的图片
            $('#aboutItemImage').prop('src',  data[1].pictureUrl);
            //from历史图片
            $('#aboutHref').prop('src', "http://39.96.173.228:8080" + r.data.fromPictureBO.pictureUrl);
            //服务图片
            $('.service-img__wrapper').css('background-image', 'url(' +  r.data.serviceusBO.pictureUrl + ')');
            //底部信息
            $.footData(r.data.contactWayBO);

            //需要中英文切换的图片类和文本类数据通过方法传参方式进行加载
            //根据语言设置页面
            setting(lang);
        }


        //设置aboutBanner图片
        function setBanners(data) {
            var aboutBanner = [];
            //设置banner图
            for (var i = 0, len = data.length; i < len; i++) {

                aboutBanner.push([' <div class="swiper-slide">',
                    '<div class="about-banner">',
                    '<img src="' + $.baseUrl() + data[i].pictureUrl + '" alt="" width="100%" height="100%">',
                    '<div class="banner-item-content">',
                    '<div class="banner-item-title font_family_heavy">', $.getLang() ? data[i].titleEnglish : data[i].title, '</div>',
                    '<div class="banner-item-text">', $.getLang() ? data[i].contextEnglish : data[i].context, '</div>',
                    '</div>',
                    '</div>',
                    '</div>'].join(''))
            }
            if (Object.keys(mySwiper).length) mySwiper.destroy();
            //动态添加dom
            $('#aboutUsBanner').empty().append(aboutBanner.join(''));
            //创建banner轮播对象
            mySwiper = new Swiper('.swiper-container', {
                loop: true, // 循环模式选项
                grabCursor: true,
                parallax: true,
                observeSlideChildren: true,
                autoplay: {
                    delay: 5000
                    //loop无效  stopOnLastSlide: true,
                },
                // 如果需要分页器
                pagination: {
                    el: '.swiper-pagination',
                    clickable: true
                }
            });
        }

        /*
         * 根据语言设置页面数据
         */
        function setting(lang) {


            //banner图片设置
            setBanners(data[0]);
            //中英文切换
            if (lang) {
                //设置英文关于我们简介
                $('.about-item-content').html(data[1].contextEnglish);
                $('#serviceTitle').html(data[2].titleEnglish);
                $('#serviceContext').html(data[2].contextEnglish);
                $('#aboutHistoryHref').text('TO LEARN MORE >');
                $('#aboutCoopterative').text('OUR CLIENTS');
            } else {
                //设置中文关于我们简介
                $('.about-item-content').html(data[1].context);
                $('#serviceTitle').html(data[2].title);
                $('#serviceContext').html(data[2].context);
                $('#aboutHistoryHref').text('去了解 >');
                $('#aboutCoopterative').text('合作伙伴');
            }


        }

        //初始化部分图片
        function institutions(data) {
            //控制轮播页面
            for (var i = 0, len = data.length; i < len; i++) {
                var domArr = [
                    '<div class="swiper-slide">',
                    '<ul class="logo-center">'
                ];
                //控制ul中的li图片个数
                for (var j = 0, jLen = data[i].length; j < jLen; j++) {
                    domArr.push('<li><img src="' +  $.baseUrl() + data[i][j].pictureUrl + '" alt="" width="100%" height="100%"></li>')
                }
                domArr.push('</ul></div>');
                $('#coopterative').append(domArr.join(''));
            }

            new Swiper('.swiper-coopterative', {
                loop: true, // 循环模式选项
                grabCursor: true,
                parallax: true,
                autoplay: {
                    delay: 5000
                    //loop无效  stopOnLastSlide: true,
                },
                // 如果需要分页器
                pagination: {
                    el: '.about-pagination',
                    bulletClass: 'about-pagination-bullet',
                    bulletActiveClass: 'about-pagination-bullet-active',
                    clickable: true
                }
            });
        }

        $('.about-href').on('touchend', function () {
            location.href = 'history.html?language=' + $.getLangStr();
        })
    })(window, jQuery);
</script>
</body>
</html>