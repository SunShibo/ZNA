<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ZNA-DETAILED</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <meta content="telephone=no" name="format-detection"/>
    <meta name="viewport"
          content="width=device-width,initial-scale=1,maximum-scale=1.0,user-scalable=no,viewport-fit=cover"/>
    <meta content="telephone=no" name="format-detection">
    <meta name="applicable-device" content="mobile">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no">
    <link rel="stylesheet" href="./css/styles.css">

    <style>
        .detailed-info {
            color: #333333;
            line-height: .36rem;
            letter-spacing: .007rem;
            font-size: .24rem;
            font-family: PingFang-SC-Regular;
        }

        .detailed-info p {
            margin-bottom: .4rem;
        }

        .major p, .education p {
            color: #666666;
            line-height: .36rem;
            font-size: .26rem;
            letter-spacing: 0.007rem;
            font-family: PingFang-SC-Regular;
        }
    </style>
</head>
<body>
<div id="app-page">
    <div class="head">
        <div class="head-item logo">
            <a href="home.html"><img src="image/logo.jpg" id="logoImage" alt="" height="100%"></a>
        </div>

        <div class="head-item head_search">
            <div class="search_icon"><img src="image/icon/ic_search.png" alt="" width="100%" height="100%"></div>
            <input id="keyword" type="search" placeholder="SEARCH" autocomplete="off"/>
        </div>

        <div class="head-item head-btn">
            <div class="close-menu" id="closeMenu">
                <img src="image/icon/ic_menuClose.png" alt="" width="100%" height="100%">
            </div>

            <div class="menu head-item-btn" id="clickMenu">
                <img src="image/icon/ic_menuOpen.png" alt="" width="100%" height="100%">
            </div>
            <div class="search head-item-btn" id="clickSearch">
                <img src="image/icon/ic_search.png" alt="" width="100%" height="100%">
            </div>
            <div class="language head-item-btn" id="language"></div>
        </div>
    </div>

    <!--搜索页面-->
    <div class="search_list">
        <div class="list">
            <div><a href="javascript:void(0)" id="toProject"></a></div>
            <div><a href="javascript:void(0)" id="toNews"></a></div>
        </div>
    </div>

    <!--菜单-->
    <nav id="nav">
        <ul class="nav-ul">
            <li><a href="aboutUs.html" id="about" class="nav-href"></a></li>
            <li>
                <a href="#" id="project" class="nav-href"></a>
                <div class="sub">
                    <ul class="sub-nav">
                        <li class="singular"><a href="project.html?id=HOTEL/RESORT"></a></li>
                        <li><a href="project.html?id=OFFICE/MIXED-USE"></a></li>
                        <li class="singular"><a href="project.html?id=CIVIC/EXHIBITION"></a></li>
                        <li><a href="project.html?id=RESIDENTIAL/HEALTHCARE"></a></li>
                        <li class="singular"><a href="project.html?id=EDUCATION/SCIENCE"></a></li>
                        <li><a href="project.html?id=MASTER/PLANNING"></a></li>
                        <li class="singular sub-bottom"><a href="project.html?id=LANDSCAPE/DESIGN"></a></li>
                        <li class="sub-bottom"><a href="project.html?id=INTERIOR/DESIGN"></a></li>
                    </ul>
                </div>
            </li>
            <li><a href="team.html" id="team" class="nav-href"></a></li>
            <li><a href="news.html" id="dynamic" class="nav-href"></a></li>
            <li>
                <a href="#" id="information" class="nav-href"></a>
                <div class="sub">
                    <ul class="sub-nav">
                        <li class="singular sub-bottom"><a href="office.html"></a></li>
                        <li class="sub-bottom"><a href="recruitment.html"></a></li>
                    </ul>
                </div>
            </li>
        </ul>
    </nav>


    <div class="content">
        <div class="detailed">
            <div class="detailed-image">
                <img src="" class="detailedImage" alt="" width="100%" height="100%">
            </div>
        </div>
        <div class="detailed-content">
            <div class="detailed-name"></div>
            <div class="detailed-position"></div>
            <div class="detailed-info"></div>
            <div class="detailed-office">
                <div class="detailed-content-title"></div>
                <div class="education"></div>
            </div>
            <div class="detailed-professional">
                <div class="detailed-content-title"></div>
                <div class="major"></div>
            </div>
        </div>
        <div class="team-project">
            <div class="team-project-title"></div>
            <ul class="project-list-image">

            </ul>
        </div>
        <div class="details-default detailed-fixed">
            <div class="back-page">
                <a href="team.html"></a>
            </div>
            <div class="nav-page">
                <div class="nav-default nav-pre">
                    <a href="#">
                        <span class="team-pre"></span>
                        <div class="nav-img">
                            <img src="./image/icon/ic_pre.png" alt="" width="100%" height="100%">
                        </div>
                    </a>
                </div>
                <div class="nav-default nav-next">
                    <a href="#">
                        <div class="nav-img">
                            <img src="./image/icon/ic_next.png" alt="" width="100%" height="100%">
                        </div>
                        <span class="team-next"></span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div id="icon_wechat">
        <div class="wechat">
            <div class="wechat_image">
                <img src="./image/wechat.jpg" alt="">
            </div>
            <div class="wechat_text">扫描二维码，关注微信公众号</div>
        </div>
    </div>

    <div id="foot">
        <div class="foot-center">
            <div class="foot-office-info">
                <div class="contact">TEL: <span id="mobile"></span></div>
                <div class="contact">FAX: <span id="faxNO"></span></div>
            </div>
            <div class="contact">EMAIL: <span id="email"></span></div>
            <div class="icon-list">
                <img id="toMicroblog" src="./image/icon/ic_microblog.png" alt="" width="100%" height="100%">
                <img id="toIn" src="./image/icon/ic_in.png" alt="" width="100%" height="100%">
                <img id="toWechat" src="./image/icon/ic_wechat.png" alt="" width="100%" height="100%">
            </div>
            <div class="foot-icp contact">沪ICP备案号17050193</div>
        </div>
    </div>
</div>
<script src="js/jquery-3.3.1.min.js"></script>
<script src="js/rem.js"></script>
<script src="js/index.js"></script>
<script>
    (function (window, $) {

        var data = {}, windowHeight6 = 0, windowHeight = 0, scrollHeight = 0;


        window.switch_language = function (lang) {
            if (data.length) {
                setting(lang);
            } else {
                init(lang)
            }

        };

        //按语言显示数据
        function setting(lang) {
            if (lang) {
                $('.detailed-name').text(data.nameEnglish);
                $('.detailed-position').text(data.positionEnglish);
                $('.detailed-info').html(data.introEnglish);
                $('.team-project-title').text('Related to the case');
                $('.education').html(data.educationalEnglish);
                $('.major').html(data.aptitudeEnglish);
                $('.detailed-office .detailed-content-title').text('EDUCATION');
                $('.detailed-professional .detailed-content-title').text('PROFESSIONAL REGISTRATION & AFFILIATIONS');
            } else {
                $('.detailed-name').text(data.name);
                $('.detailed-position').text(data.position);
                $('.detailed-info').html(data.intro);
                $('.team-project-title').text('参与的项目');
                $('.education').html(data.educational);
                $('.major').html(data.aptitude);
                $('.detailed-office .detailed-content-title').text('教育资质');
                $('.detailed-professional .detailed-content-title').text('专业背景');
            }

            //底部导航栏
            var navStr = lang ? 'NOTHING' : '无';
            //切换文本
            var preStr = lang ? data.beforeUserNameEnglish : data.beforeUserName;
            var nextStr = lang ? data.afterUserNameEnglish : data.afterUserName;
            var hrefUrl = 'team_detailed.html?language=' + $.getLangStr() + '&id=';
            //判断是否还有下一个或上一个
            var herfPreUrl = data.beforeUserId ? hrefUrl + data.beforeUserId : '';
            var herfNextUrl = data.afterUserId ? hrefUrl + data.afterUserId : '';
            var nextBtn = $('.nav-next>a'), preBtn = $('.nav-pre>a');
            //绑定
            preBtn.attr('href', herfPreUrl).children('.team-pre').text(data.beforeUserName ? preStr : navStr);
            nextBtn.attr('href', herfNextUrl).children('.team-next').text(data.afterUserName ? nextStr : navStr);
            //置灰
            !herfNextUrl ? nextBtn.css('color', '#bababa') : '';
            !herfPreUrl ? preBtn.css('color', '#bababa') : '';
            $('.back-page>a').attr('href', 'team.html?language=' + $.getLangStr()).text(lang ? '< TEAM' : '< 核心团队')
        }

        //第一次初始化数据
        function init(lang) {
            $.ajax({
                url: '/team/getTeamBOById',
                type: 'POST',
                dataType: 'json',
                data: {id: $.getUrl('id')},
                success: function (r) {
                    data = r.data.teamBO;
                    $('.detailedImage').prop('src', r.data.teamBO.headPortrait);
                    setting(lang);

                    var projectArr = [];
                    //参与的项目
                    for (var i = 0, len = r.data.teamBO.projectPicture.length; i < len; i++) {
                        if (!!r.data.teamBO.projectPicture[i]) {
                            var id = r.data.teamBO.projectPicture[i].id;
                            var imageUrl = JSON.parse(r.data.teamBO.projectPicture[i].projectPicture)[0];
                            projectArr.push('<li><a href="project_detailed.html?id=' + id + '"><img src="' + imageUrl + '" alt="" width="100%" height="100%"></a></li>')
                        }
                    }

                    $('.project-list-image').append(projectArr.join(''));

                    //如果项目为空隐藏dom
                    if (!r.data.teamBO.projectPicture.length) {
                        $('.team-project').hide();
                    }
                    //底部数据
                    $.footData(r.data.contactWayBO);

                    //每次重新计算页面高度
                    //变量scrollHeight是滚动条的总高度
                    scrollHeight = document.documentElement.scrollHeight || document.body.scrollHeight;
                    //变量windowHeight是可视区的高度
                    windowHeight = document.documentElement.clientHeight || document.body.clientHeight;
                    //七分之一的可视区高度
                    windowHeight6 = Math.ceil(windowHeight / 6);
                }
            })
        }

        //绑定滚轮事件
        $(window).on('scroll', function () {
            //变量scrollTop是滚动条滚动时，距离顶部的距离
            var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
            //滚动条到底部的条件
            if (scrollTop + windowHeight > scrollHeight - windowHeight6) {
                $('.details-default').removeClass('detailed-fixed').addClass('detailed-href');
            } else {
                $('.details-default').removeClass('detailed-href').addClass('detailed-fixed');
            }
        });
    })(window, jQuery)
</script>
</body>
</html>